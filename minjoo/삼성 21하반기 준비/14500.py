import sys
input = sys.stdin.readline

n, m = map(int, input().split()) # 세로, 가로
board = [list(map(int, input().split())) for _ in range(n)]

tetromino = [
    [[0, 0], [0, 1], [0, 2], [0, 3]],
    [[0, 0], [1, 0], [2, 0], [3, 0]],

    [[0, 0], [1, 0], [0, 1], [1, 1]],

    [[0, 0], [1, 0], [2, 0], [2, 1]],
    [[0, 0], [1, 0], [0, 1], [0, 2]],
    [[0, 0], [0, 1], [1, 1], [2, 1]], 
    [[0, 0], [0, 1], [0, 2], [-1, 2]],

    [[0, 0], [1, 0], [2, 0], [2, -1]], 
    [[0, 0], [1, 0], [1, 1], [1, 2]],
    [[0, 0], [1, 0], [2, 0], [0, 1]],
    [[0, 0], [0, 1], [0, 2], [1, 2]],


    [[0, 0], [1, 0], [1, 1], [2, 1]],
    [[0, 0], [0, 1], [-1, 1], [-1, 2]],

    [[0, 0], [1, 0], [1, -1], [2, -1]],
    [[0, 0], [0, 1], [1, 1], [1, 2]],
    
    [[0, 0], [0, 1], [0, 2], [1, 1]],
    [[0, 0], [1, 0], [1, 1], [2, 0]],
    [[0, 0], [0, 1], [0, 2], [-1, 1]],
    [[0, 0], [1, 0], [2, 0], [1, -1]]
]

ans = 0
for t in range(len(tetromino)):
    for x in range(n):
        for y in range(m):
            temp = 0
            flag = 1
            for dx, dy in tetromino[t]:
                if(0<=x+dx<n and 0<=y+dy<m):
                    temp += board[x+dx][y+dy]
                else:
                    flag = 0
                    break
            if(flag):
                ans = max(ans, temp)

print(ans)

